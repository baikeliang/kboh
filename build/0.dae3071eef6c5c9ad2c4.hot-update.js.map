{"version":3,"sources":["webpack:///./webpack.client.config.js?bcc5","webpack:///./app/server/server.js?b2ef","webpack:///external \"jsonwebtoken\"?67fa","webpack:///./app/server/interface/interface.js?7c07","webpack:///external \"isomorphic-fetch\"?9f67"],"names":["app","use","publicPath","output","stats","colors","resolve","alias","HTML","content","store","__html","getState","get","req","res","getUserInfoByOpenid","openid","send","next","memoryHistory","url","history","indexOf","routes","location","error","redirectLocation","renderProps","status","message","redirect","pathname","search","listen","console","log","hhh","u","URLSearchParams","append","method","mode","cache","then","response","Error","json","user"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,EAAE,mFAAmF;AAC9F,UAAS,6EAA6E;AACtF,UAAS,gDAAgD;AACzD,UAAS,2DAA2D;AACpE,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACnDA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAMA;;;;AAEA;;;;;;AApBA;AAsBA,KAAMA,MAAM,wBAAZ;;AAEAA,KAAIC,GAAJ,CAAQ,oCAAqB,qDAArB,EAA6C;AACnDC,eAAY,8BAAcC,MAAd,CAAqBD,UADkB;AAEnDE,UAAO;AACLC,aAAQ;AADH,IAF4C;AAKnDC,YAAS;AACHC,YAAO;AACHP,YAAK,8BAAcM,OAAd,CAAsBC,KAAtB,CAA4BP;AAD9B;AADJ;AAL0C,EAA7C,CAAR;;AAYA,KAAMQ,OAAO,SAAPA,IAAO;AAAA,OAAGC,OAAH,QAAGA,OAAH;AAAA,OAAYC,KAAZ,QAAYA,KAAZ;AAAA,UACX;AAAA;AAAA,OAAM,MAAK,IAAX;AACE;AAAA;AAAA;AACI,+CAAM,SAAQ,OAAd,GADJ;AAEI;AAAA;AAAA;AAAA;AAAA,QAFJ;AAGI,+CAAM,MAAK,UAAX,EAAsB,SAAQ,uEAA9B,GAHJ;AAII,+CAAM,KAAI,YAAV,EAAuB,MAAK,wEAA5B;AAJJ,MADF;AAOE;AAAA;AAAA;AACE,8CAAK,IAAG,MAAR,EAAe,yBAAyB,EAAEC,QAAQF,OAAV,EAAxC,GADF;AAEE,8CAAK,IAAG,UAAR,GAFF;AAGE,iDAAQ,yBAAyB,EAAEE,qCAAmC,mCAAUD,MAAME,QAAN,EAAV,CAAnC,MAAF,EAAjC,GAHF;AAIE,iDAAQ,KAAI,YAAZ;AAJF;AAPF,IADW;AAAA,EAAb;;AAiBAZ,KAAIa,GAAJ,CAAQ,kBAAR,EAA2B,UAASC,GAAT,EAAaC,GAAb,EAAiB;;AAGxC,uBAAKC,mBAAL,CAAyB,EAACC,QAAO,WAAR,EAAzB;;AAEAF,OAAIG,IAAJ,CAAS,OAAT;AACH,EAND;;AAQAlB,KAAIC,GAAJ,CAAQ,UAAUa,GAAV,EAAeC,GAAf,EAAoBI,IAApB,EAA0B;AAChC,OAAMC,gBAAgB,sCAAoBN,IAAIO,GAAxB,CAAtB;AACA,OAAMX,QAAQ,oCAAeU,aAAf,CAAd;AACA,OAAME,UAAU,4CAAqBF,aAArB,EAAoCV,KAApC,CAAhB;;AAEA,OAAGI,IAAIO,GAAJ,CAAQE,OAAR,CAAgB,aAAhB,KAAgC,CAAnC,EAAqC;AACjCJ;AACA;AACH;;AAED,2BAAM,EAAEG,gBAAF,EAAWE,wBAAX,EAAmBC,UAAUX,IAAIO,GAAjC,EAAN,EAA8C,UAACK,KAAD,EAAQC,gBAAR,EAA0BC,WAA1B,EAA0C;AACtF,SAAIF,KAAJ,EAAW;AACTX,WAAIc,MAAJ,CAAW,GAAX,EAAgBX,IAAhB,CAAqBQ,MAAMI,OAA3B;AACD,MAFD,MAEO,IAAIH,gBAAJ,EAAsB;AAC3BZ,WAAIgB,QAAJ,CAAa,GAAb,EAAkBJ,iBAAiBK,QAAjB,GAA4BL,iBAAiBM,MAA/D;AACD,MAFM,MAEA,IAAIL,WAAJ,EAAiB;AACtB,WAAMnB,UAAU,4BACd;AAAA;AAAA,WAAU,OAAOC,KAAjB;AACE,mEAAmBkB,WAAnB;AADF,QADc,CAAhB;;AAMAb,WAAIG,IAAJ,CAAS,sBAAsB,4BAAe,8BAAC,IAAD,IAAM,SAAST,OAAf,EAAwB,OAAOC,KAA/B,GAAf,CAA/B;AACD;AACF,IAdD;AAeD,EAzBD;;AA2BAV,KAAIkC,MAAJ,CAAW,IAAX,EAAiB,YAAY;AAC3BC,WAAQC,GAAR,CAAY,2DAAZ;AACD,EAFD,E;;;;;;;;;;ACxFA,0C;;;;;;;;;;;;;;;;ACAA;;;;;;AAEA,KAAMC,MAAM;AACXrB,wBAAoB,mCAAkB;AAAA,SAARC,MAAQ,QAARA,MAAQ;;;AAEpC,SAAIqB,IAAI,IAAIC,eAAJ,EAAR;AACAD,OAAEE,MAAF,CAAS,QAAT,EAAmBvB,MAAnB;;AAEA,oCAAM,gDAA8CqB,CAApD,EAAuD;AAC/CG,eAAQ,KADuC;AAE/CC,aAAM,MAFyC;AAG/CC,cAAO;AAHwC,MAAvD,EAKKC,IALL,CAKU,UAASC,QAAT,EAAmB;AACrB,WAAIA,SAAShB,MAAT,IAAmB,GAAvB,EAA4B;AACxB,eAAM,IAAIiB,KAAJ,CAAU,0BAAV,CAAN;AACH;AACD,cAAOD,SAASE,IAAT,EAAP;AACH,MAVL,EAWKH,IAXL,CAWU,UAASI,IAAT,EAAe;AACjBb,eAAQC,GAAR,CAAYY,IAAZ;AACH,MAbL;AAgBD;AAtBU,EAAZ;;mBAyBeX,G;;;;;;;;;;AC3Bf,8C","file":"0.dae3071eef6c5c9ad2c4.hot-update.js","sourcesContent":["var path = require('path');\nvar webpack = require(\"webpack\")\nvar HtmlwebpackPlugin = require('html-webpack-plugin');\nmodule.exports = {\n    entry: [\n        'babel-polyfill',\n        'webpack/hot/dev-server',\n        'webpack-dev-server/client?http://localhost:8080',\n        path.resolve(__dirname,'..','app/main.js'),\n    ],\n    output: {\n        path: path.resolve(__dirname,'..','build'),\n        filename: 'bundle.js',\n        publicPath: '/',\n    },\n    plugins: [new HtmlwebpackPlugin({\n        title: '选择预约项目',\n        template: path.resolve(__dirname,'..','app/index_template.html'),\n        inject: 'body' // Inject all scripts into the body \n    }),new webpack.HotModuleReplacementPlugin()],\n    module: {\n        loaders: [{\n            'loader': 'babel-loader',\n            exclude: [\n                //在node_modules的文件不被babel理会\n                path.resolve(__dirname,'..','node_modules'),\n            ],\n            include: [\n                //指定app这个文件里面的采用babel\n                path.resolve(__dirname,'..','app'),\n            ],\n            test: /\\.jsx?$/,\n            query: {\n                plugins: ['transform-runtime'],\n                presets: ['es2015', 'stage-0', 'react'],\n                \"env\": {\n                    \"development\": {\n                        \"presets\": [\"react-hmre\"]\n                    }\n                }\n            }\n        },{ test: /\\.less$/, loader: 'style!css?modules&localIdentName=[name]__[local]!less' },\n        { test: /\\.css$/, loader: 'style!css?modules&localIdentName=[name]__[local]' },\n        { test: /\\.(woff)$/, loader: 'url?limit=100000' },\n        { test: /\\.(png|jpg|jpeg|svg)$/, loader: 'url?limit=25000' },]\n    },\n    resolve: {\n        alias: {\n            app: path.join(__dirname,'..', \"./app\")\n        }\n    }\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./webpack.client.config.js\n ** module id = 235\n ** module chunks = 0\n **/","/*eslint-disable no-console */\nimport express from 'express'\nimport serialize from 'serialize-javascript'\n\nimport webpack from 'webpack'\nimport webpackDevMiddleware from 'webpack-dev-middleware'\nimport webpackConfig from '../../webpack.client.config.js'\n\nimport React from 'react'\nimport { renderToString } from 'react-dom/server'\nimport { Provider } from 'react-redux'\nimport { createMemoryHistory, match, RouterContext } from 'react-router'\nimport { syncHistoryWithStore } from 'react-router-redux'\n\nimport { configureStore } from 'app/configure-store.js'\n\nimport routes from 'app/routes'\n\nimport jwt from 'jsonwebtoken'\n\nimport ajax from './interface/interface.js'\n\nconst app = express()\n\napp.use(webpackDevMiddleware(webpack(webpackConfig), {\n  publicPath: webpackConfig.output.publicPath,\n  stats: {\n    colors: true\n  },\n  resolve: {\n        alias: {\n            app: webpackConfig.resolve.alias.app\n        }\n    }\n}))\n\nconst HTML = ({ content, store }) => (\n  <html lang=\"en\">\n    <head>\n        <meta charSet=\"utf-8\"/>\n        <title>登陆</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1\"/>\n        <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.3.1/css/swiper.min.css\"/>\n    </head>\n    <body>\n      <div id=\"root\" dangerouslySetInnerHTML={{ __html: content }}/>\n      <div id=\"devtools\"/>\n      <script dangerouslySetInnerHTML={{ __html: `window.__initialState__=${serialize(store.getState())};` }}/>\n      <script src=\"/bundle.js\"/>\n    </body>\n  </html>\n)\n\napp.get('/wxcallback/auth',function(req,res){\n\n\n    ajax.getUserInfoByOpenid({openid:'dsafeasft'})\n\n    res.send('sssss')\n});\n\napp.use(function (req, res, next) {\n  const memoryHistory = createMemoryHistory(req.url)\n  const store = configureStore(memoryHistory)\n  const history = syncHistoryWithStore(memoryHistory, store)\n\n  if(req.url.indexOf('/wxcallback')==0){\n      next();\n      return;\n  }\n\n  match({ history, routes, location: req.url }, (error, redirectLocation, renderProps) => {\n    if (error) {\n      res.status(500).send(error.message)\n    } else if (redirectLocation) {\n      res.redirect(302, redirectLocation.pathname + redirectLocation.search)\n    } else if (renderProps) {\n      const content = renderToString(\n        <Provider store={store}>\n          <RouterContext {...renderProps}/>\n        </Provider>\n      )\n\n      res.send('<!doctype html>\\n' + renderToString(<HTML content={content} store={store}/>))\n    }\n  })\n})\n\napp.listen(3000, function () {\n  console.log('Server listening on http://localhost:3000, Ctrl+C to stop')\n})\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/server/server.js\n **/","module.exports = require(\"jsonwebtoken\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jsonwebtoken\"\n ** module id = 248\n ** module chunks = 0\n **/","import fetch from 'isomorphic-fetch'\n\nconst hhh = {\n\tgetUserInfoByOpenid:function({openid}){\n\n\t\t\tvar u = new URLSearchParams();\n\t\t\tu.append('openid', openid);\n\n\t\t\tfetch('http://192.168.10.10/userinfobyopenid/rest?'+u, {\n\t\t\t        method: 'GET',\n\t\t\t        mode: 'cors',\n\t\t\t        cache: 'default'\n\t\t\t    })\n\t\t\t    .then(function(response) {\n\t\t\t        if (response.status >= 400) {\n\t\t\t            throw new Error(\"Bad response from server\");\n\t\t\t        }\n\t\t\t        return response.json();\n\t\t\t    })\n\t\t\t    .then(function(user) {\n\t\t\t        console.log(user);\n\t\t\t    });\n\n\n\t}\n}\n\nexport default hhh\n\n\n/** WEBPACK FOOTER **\n ** ./app/server/interface/interface.js\n **/","module.exports = require(\"isomorphic-fetch\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"isomorphic-fetch\"\n ** module id = 250\n ** module chunks = 0\n **/"],"sourceRoot":""}