{"version":3,"sources":["webpack:///./app/server/server.js?b2ef","webpack:///./app/configure-store.js?fdb9","webpack:///./app/routes.js?edcb","webpack:///./app/redux/reducers/auth.js?d351","webpack:///./app/redux/middleware/clientMiddleware.js?90ba","webpack:///./~/babel-runtime/helpers/slicedToArray.js?39c4","webpack:///./~/babel-runtime/core-js/is-iterable.js?350e","webpack:///./~/babel-runtime/~/core-js/library/fn/is-iterable.js?f64a","webpack:///./~/babel-runtime/~/core-js/library/modules/core.is-iterable.js?be30","webpack:///./~/babel-runtime/core-js/get-iterator.js?1b08","webpack:///./~/babel-runtime/~/core-js/library/fn/get-iterator.js?cf7c","webpack:///./~/babel-runtime/~/core-js/library/modules/core.get-iterator.js?74ea","webpack:///./~/babel-runtime/helpers/objectWithoutProperties.js?3edf","webpack:///./app/isomorphic-api/ApiClient.js?dc70","webpack:///./~/babel-runtime/core-js/json/stringify.js?4574","webpack:///./~/babel-runtime/~/core-js/library/fn/json/stringify.js?834a"],"names":["global","__CLIENT__","__SERVER__","console","log","rrr","resolve","reject","then","val","err","app","use","publicPath","output","stats","colors","alias","HTML","content","store","__html","getState","get","req","res","code","query","type","undefined","openid","u","append","redirect","next","memoryHistory","url","client","history","indexOf","params","routes","location","error","redirectLocation","renderProps","status","send","message","pathname","search","info","listen","configureStore","DevTools","initialState","reducer","routing","reduxAsyncConnect","auth","devTools","document","instrument","App","children","requireAuth","nextState","replaceState","localStorage","token","nextPathname","isLoaded","load","login","logout","LOAD","LOAD_SUCCESS","LOAD_FAIL","LOGIN","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","LOGOUT_SUCCESS","LOGOUT_FAIL","Map","loaded","state","action","set","merge","loading","user","result","loggingIn","loginError","loggingOut","logoutError","globalState","jwtToken","types","promise","GET","done","json","valid","name","POST","data","clientMiddleware","dispatch","rest","REQUEST","SUCCESS","FAILURE","actionPromise","catch","methods","ApiClient","args","forEach","method","path","mode","cache","key","value","body","headers"],"mappings":"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","file":"0.2cebd1f71f13590ef3e4.hot-update.js","sourcesContent":["/*eslint-disable no-console */\nimport express from 'express'\nimport serialize from 'serialize-javascript'\n\nimport webpack from 'webpack'\nimport webpackDevMiddleware from 'webpack-dev-middleware'\nimport webpackConfig from '../../webpack.client.config.js'\n\nimport React from 'react'\nimport { renderToString } from 'react-dom/server'\nimport { Provider } from 'react-redux'\nimport { createMemoryHistory, match, RouterContext } from 'react-router'\nimport { syncHistoryWithStore } from 'react-router-redux'\n\nimport { ReduxAsyncConnect, loadOnServer, reducer as reduxAsyncConnect } from 'redux-connect'\n\nimport { configureStore } from 'app/configure-store.js'\n\nimport routes from 'app/routes'\n\nimport jwt from 'jsonwebtoken'\n\nimport ApiClient from 'app/isomorphic-api/ApiClient'\n\nimport { URLSearchParams } from 'url-search-params-polyfill'\n\nimport ajax from './interface/interface.js'\n\nimport Promise from 'bluebird'\n\nglobal.__CLIENT__ = false;\nglobal.__SERVER__ = true;\n\nconsole.log('WWWWWWWWWWWWWWWWWW');\n\nvar rrr = new Promise(function(resolve, reject) {\n if (1){\n resolve('!!!!!!!!!!!!!!!!!!!!!!1');\n } else {\n reject('!!!!!!!!!!!!!!!!!!!!!!2');\n }\n});\n\nrrr.then(function(val){\n  return Promise.reject('aaaaaaa')\n}).then(function(val){\n  console.log('wwwwww'+val)\n}, function(err){\n   console.log('bbbbbbbb'+err)\n})\n\n\nconst app = express()\n\napp.use(webpackDevMiddleware(webpack(webpackConfig), {\n  publicPath: webpackConfig.output.publicPath,\n  stats: {\n    colors: true\n  },\n  resolve: {\n        alias: {\n            app: webpackConfig.resolve.alias.app\n        }\n    }\n}))\n\nconst HTML = ({ content, store }) => (\n  <html lang=\"en\">\n    <head>\n        <meta charSet=\"utf-8\"/>\n        <title>登陆</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1\"/>\n        <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.3.1/css/swiper.min.css\"/>\n    </head>\n    <body>\n      <div id=\"root\" dangerouslySetInnerHTML={{ __html: content }}/>\n      <div id=\"devtools\"/>\n      <script dangerouslySetInnerHTML={{ __html: `window.__initialState__=${serialize(store.getState())};` }}/>\n      <script src=\"/bundle.js\"/>\n    </body>\n  </html>\n)\n\napp.get('/wxcallback/auth',function(req,res){\n\n    var code = req.query.code\n    var type = req.query.type\n    if (code === undefined || code === null) {\n\n\n    } else {\n        /// sync get openid\n        let openid = 'asdaaaaa'\n\n        let u = new URLSearchParams();\n        u.append('openid', openid);\n        res.redirect('/usercenter/rest?'+u)\n\n    }\n\n\n});\n\napp.use(function (req, res, next) {\n  const memoryHistory = createMemoryHistory(req.url)\n  const client = new ApiClient(req)\n  const store = configureStore(memoryHistory,client)\n  const history = syncHistoryWithStore(memoryHistory, store)\n\n  if(req.url.indexOf('/wxcallback')==0){\n      next();\n      return;\n  }\n  else if(req.url.indexOf('/usercenter/rest?')){\n      var openid = req.params.openid\n      console.log('openid!!!!!!!   '+openid)\n\n  }\n\n  match({ history, routes, location: req.url }, (error, redirectLocation, renderProps) => {\n    if (error) {\n      res.status(500).send(error.message)\n    } else if (redirectLocation) {\n      res.redirect(302, redirectLocation.pathname + redirectLocation.search)\n    } else if (renderProps) {\n      \n    loadOnServer({ ...renderProps, store, params:{openid}}).then(() => {\n \n      // 2. use `ReduxAsyncConnect` instead of `RoutingContext` and pass it `renderProps` \n      const content = renderToString(\n        <Provider store={store} key=\"provider\">\n          <ReduxAsyncConnect {...renderProps} />\n        </Provider>\n      )\n\n      res.send('<!doctype html>\\n' + renderToString(<HTML content={content} store={store}/>))\n    },(err)=>{\n      if(err.info == 'auth')\n        res.redirect('/login')\n    })\n    }\n  })\n})\n\napp.listen(3000, function () {\n  console.log('Server listening on http://localhost:3000, Ctrl+C to stop')\n})\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/server/server.js\n **/","import React from 'react'\nimport thunk from 'redux-thunk'\n\nimport { createStore, combineReducers, compose, applyMiddleware } from 'redux'\nimport { createDevTools } from 'redux-devtools'\nimport LogMonitor from 'redux-devtools-log-monitor'\nimport DockMonitor from 'redux-devtools-dock-monitor'\n\n\nimport {reducer as reduxAsyncConnect } from 'redux-connect'\n\nimport  auth from 'app/redux/reducers/auth'\n\nimport  clientMiddleware from 'app/redux/middleware/clientMiddleware'\n\nimport { routerReducer, routerMiddleware } from 'react-router-redux'\n\nexport const DevTools = createDevTools(\n  <DockMonitor toggleVisibilityKey=\"ctrl-h\" changePositionKey=\"ctrl-q\">\n    <LogMonitor theme=\"tomorrow\" preserveScrollTop={false} />\n  </DockMonitor>\n)\n\nexport function configureStore(history,client,initialState={}) {\n  const reducer = combineReducers({\n    routing: routerReducer,\n    reduxAsyncConnect,\n    auth\n  })\n\n  let devTools = []\n  if (typeof document !== 'undefined') {\n    devTools = [ DevTools.instrument() ]\n  }\n\n  const store = createStore(\n    reducer,\n    initialState,\n    compose(\n      applyMiddleware(\n        routerMiddleware(history),thunk,clientMiddleware(client)\n      ),\n      ...devTools\n    )\n  )\n\n  return store\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/configure-store.js\n **/","import React from 'react';\n\n\nimport { Router, DefaultRoute, Route, NotFoundRoute, Redirect } from 'react-router';\n\nimport ToOrder from 'app/toorder/main.js'\n\nimport UserCenter from 'app/usercenter/main.js'\n\nimport MyOrders from 'app/usercenter/myorder/myorders.js'\nimport MyOrderInfo from 'app/usercenter/myorder/myorderinfo.js'\nimport MyCases from 'app/usercenter/mycase/mycases.js'\nimport MyCaseDesc from 'app/usercenter/mycase/mycasedesc.js'\nimport Login from 'app/usercenter/login.js'\n\n\nconst App = ({ children }) => (\n  <div>\n    {children || \"ddddd\"} \n  </div>\n)\n\nfunction requireAuth(nextState, replaceState) {\n  if (localStorage&&(!localStorage.token))\n      replaceState({ nextPathname: nextState.location.pathname }, '/login')\n  console.log(\"require.....auth\")\n  \n}\n\nconst routes = (\n      <Route path=\"/\" component={ App }>\n        <Route path=\"usercenter(/rest?)\" component={ UserCenter } onEnter={requireAuth}>\n          <Route path=\"toOrder\"   component={ ToOrder }/>\n          <Route path=\"myOrders\"  component={ MyOrders } />\n          <Route path=\"myOrderInfo\" component={ MyOrderInfo } />\n          <Route path=\"myCases\"   component={ MyCases }/>\n          <Route path=\"myCaseDesc\"    component={ MyCaseDesc }/>\n        </Route>        \n        <Route path=\"login\" component={ Login } />  \n      </Route>\n)\n\nexport default routes\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/routes.js\n **/","import Immutable from 'immutable'\nimport Promise from 'bluebird'\n\nconst LOAD = 'bohe/auth/LOAD';\nconst LOAD_SUCCESS = 'bohe/auth/LOAD_SUCCESS';\nconst LOAD_FAIL = 'bohe/auth/LOAD_FAIL';\nconst LOGIN = 'bohe/auth/LOGIN';\nconst LOGIN_SUCCESS = 'bohe/auth/LOGIN_SUCCESS';\nconst LOGIN_FAIL = 'bohe/auth/LOGIN_FAIL';\nconst LOGOUT = 'bohe/auth/LOGOUT';\nconst LOGOUT_SUCCESS = 'bohe/auth/LOGOUT_SUCCESS';\nconst LOGOUT_FAIL = 'bohe/auth/LOGOUT_FAIL';\n\nconst initialState =Immutable.Map({\n  loaded: false\n});\n\nexport default function reducer(state = initialState, action = {}) {\n    switch (action.type) {\n        case LOAD:\n            return state.set('loaded', true)\n        case LOAD_SUCCESS:\n            return state.merge({ loading: false, loaded: true, user: action.result })\n        case LOAD_FAIL:\n            return state.merge({ loading: false, loaded: false, user: action.error })\n        case LOGIN:\n            return state.merge({ loggingIn: true })\n        case LOGIN_SUCCESS:\n            return state.merge({ loggingIn: false, user: action.result })\n        case LOGIN_FAIL:\n            return state.merge({ loggingIn: false, user: null, loginError: action.error })\n\n        case LOGOUT:\n            return state.merge({ loggingOut: true })\n        case LOGOUT_SUCCESS:\n            return state.merge({\n                loggingOut: false,\n                user: null\n            })\n        case LOGOUT_FAIL:\n            return state.merge({\n                loggingOut: false,\n                logoutError: action.error\n            })\n        default:\n            return state\n    }\n}\n\n\nexport function isLoaded(globalState) {\n  return globalState.auth && globalState.auth.loaded;\n}\n\nexport function load({ openid }) {\n    var params = {}\n    console.log('YYYYYY '+openid)\n\n    if (__SERVER__ && openid) {\n\n        params.openid = openid\n\n    } else if (localStorage && localStorage.jwtToken) {\n\n        params.jwtToken = localStorage.jwtToken\n    }\n    return {\n        types: [LOAD, LOAD_SUCCESS, LOAD_FAIL],\n        promise: (client) => client.GET('http://192.168.10.10/userinfo/rest?', { params }, {\n            done: function(res) {\n                var user = res.json()\n                console.log(user)\n                if (user.valid == 1) {\n\n                    return Promise.resolve(user)\n                } else {\n                    var err = { info: 'auth' }\n                    return Promise.reject(err)\n                }\n            },\n            error: function(err) {\n                     \n                return  Promise.reject({ info: 'wire' })\n            }\n        })\n    };\n}\n\n\n\n\nexport function login(name) {\n  return {\n    types: [LOGIN, LOGIN_SUCCESS, LOGIN_FAIL],\n    promise: (client) => client.POST('/login', {\n      data: {\n        name: name\n      }\n    })\n  };\n}\n\nexport function logout() {\n  return {\n    types: [LOGOUT, LOGOUT_SUCCESS, LOGOUT_FAIL],\n    promise: (client) => client.get('/logout')\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/redux/reducers/auth.js\n **/","export default function clientMiddleware(client) {\n  return ({dispatch, getState}) => {\n    return next => action => {\n\n      const { promise, types, ...rest } = action; // eslint-disable-line no-redeclare\n      if (!promise) {\n        return next(action);\n      }\n\n      const [REQUEST, SUCCESS, FAILURE] = types;\n      next({...rest, type: REQUEST});\n\n      const actionPromise = promise(client);\n      actionPromise.then(\n        (result) => next({...rest, result, type: SUCCESS}),\n        (error) => next({...rest, error, type: FAILURE})\n      ).catch((error)=> {\n        console.error('MIDDLEWARE ERROR:', error);\n        next({...rest, error, type: FAILURE});\n      });\n\n      return actionPromise;\n    };\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/redux/middleware/clientMiddleware.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/slicedToArray.js\n ** module id = 423\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/is-iterable.js\n ** module id = 424\n ** module chunks = 0\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/is-iterable.js\n ** module id = 425\n ** module chunks = 0\n **/","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function(it){\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/core.is-iterable.js\n ** module id = 426\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/get-iterator.js\n ** module id = 427\n ** module chunks = 0\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/get-iterator.js\n ** module id = 428\n ** module chunks = 0\n **/","var anObject = require('./_an-object')\n  , get      = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/core.get-iterator.js\n ** module id = 429\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/objectWithoutProperties.js\n ** module id = 430\n ** module chunks = 0\n **/","import Promise from 'bluebird'\nimport fetch from 'isomorphic-fetch'\nimport { URLSearchParams } from 'url-search-params-polyfill'\n\nconst methods = ['GET', 'POST'];\nexport default class ApiClient {\n    constructor(args) {\n        // code\n        methods.forEach((method) =>\n            this[method] = (path, { params, data } = {}, {done,error}) => {\n\n\n                ///////////////////////////////\n                var u = new URLSearchParams();\n                var req = {\n                    method: method,\n                    mode: 'cors',\n                    cache: 'default'\n                }\n                if ((method == 'GET') && params) {\n                    for (var [key, value] of params) {\n                        u.append(key, value)\n                    }\n                } else if (method == 'POST' && data) {\n\n                    req.body = JSON.stringify(data)\n                    req.headers = {\n                        'Content-Type': 'application/json'\n                    }\n\n                }\n\n                return fetch('path' + u, req).then(done,error)\n            }\n        )\n    }\n\n    // methods\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/isomorphic-api/ApiClient.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/json/stringify.js\n ** module id = 432\n ** module chunks = 0\n **/","var core  = require('../../modules/_core')\n  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/json/stringify.js\n ** module id = 433\n ** module chunks = 0\n **/"],"sourceRoot":""}